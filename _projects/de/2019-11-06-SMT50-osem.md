---
layout: project_page
name: "IoT Pflanze"
date: 2019-11-06
author: Yannick
abstract: "Mit einem kapazitiven Bodenfeuchtesensor, der senseBox und der openSenseMap machen wir deine Pflanze IoT fähig."
image: Titebild_Bodenfeuchte.jpg
image0: /images/projects/bodenfeuchte/setup_reallife2.jpg
image1: /images/projects/bodenfeuchte/sensoren_reg.jpg
image2: /images/projects/bodenfeuchte/sensoren_umbenennen.jpg
image3: /images/projects/bodenfeuchte/blockly_sketch.jpg
image4: /images/projects/bodenfeuchte/station_sendung.jpg
image5: /images/projects/bodenfeuchte/station_aufbau.jpg
material:
    - senseBox MCU
    - kapazitiver Bodenfeuchtesensor (Trueber SMT50) 
    - WiFi-Bee
ide: blockly
lang: de
tags: ["Informatik"]
difficult: leicht
---
# Bodenfeuchtesensor SMT50 auf der openSenseMap

Hier zeigen wir dir, wie du die Werte des SMT50 mithilfe des WiFi-Bees auf die openSenseMap hochlädst und so auch aus dem Urlaub heraus immer den Überblick über deine Bodenfeuchte behalten kannst!

## Aufbau

Hier muss man nicht viel beachten. Solltest du den truebner SMT50 in unserem Shop gekauft haben, dann kommt dieser bereits mit einem JST-Stecker und man kann ihn einfach in einen der Digital-Ports einstecken. By default der Erste (auf älteren Boards noch mit A gekennzeichnet). Das WiFi-Bee kommt ebenfalls auf den ersten Bee-Steckplatz.<br>Hier im Bild nochmal der gesamte Aufbau:
{% include image.html image=page.image0 %}

## Neue senseBox auf der openSenseMap anlegen

Öffne die [openSenseMap](https://opensensemap.org) und lege dort eine neue senseBox an. Wie das Schritt für Schritt funktioniert wird dir in folgendem Video erklärt:
<iframe width="640" height="480" src="https://www.youtube-nocookie.com/embed/LtGrribDAho" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
Konfiguriere die senseBox nach deinen Wünschen und wähle die senseBox:edu aus. Dort wählen wird diesmal nur den Temperatursensor aus, den wir substituieren, da der SMT50 nicht Teil der Standardkonfiguration der senseBox ist.<br>Hier nochmal zur Veranschaulichung:<br>
{% include image.html image=page.image1 %}

Sobald die senseBox registriert ist, kann man diese auf dem Dashboard anzeigen lassen. Hier gibt es nun die Möglichkeit die Box zu bearbeiten. Aus den ursprünglich für den HDC gedachten Einträgen, werden diese beiden:<br>
{% include image.html image=page.image2 %}

Nun darf man nicht vergessen auf die Diskette oben rechts zu klicken, um die Änderungen zu speichern. Notiere dir nun die Box ID zusammen mit den beiden Sensor IDs.

## Programmierung

Die Programmierung wird in [Blockly für senseBox](https://blockly.sensebox.de) durchgeführt. Folgende Blöcke werden für die Überwachung deiner Pflanze verwerndet.<br>
{% include image.html image=page.image3 %}

Im WiFi-Block musst du noch deinen Netzwerknamen und das WLAN-Passwort eintragen und im OSeM-Block die ID deiner senseBox. In den Blöcken der SMT Message musst du nun die zuvor notierten IDs eintragen. Achte darauf die IDs für Bodentemerpatur und Bodenfeuchtigkeit nicht zu vertauschen.

Das Programm wird nun via USB-Kabel auf die senseBox übertragen. Die senseBox verbindet sich nun mit deinem WLAN Netzwerk und sendet alle X Sekunden Messwerte an die openSenseMap.<br>
{% include image.html image=page.image4 %}

## Test

{% include image.html image=page.image5 %}<br>
Der Sensor muss nicht vorher kalibriert werden. Stecke den Sensor in einer waagerechten Position in die Erde und überprüfe die Messwerte auf der openSenseMap.
