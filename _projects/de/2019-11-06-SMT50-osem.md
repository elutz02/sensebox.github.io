---
layout: project_page
name: "Bodenfeuchtesensor SMT50 auf der openSenseMap"
date: 2019-11-06
author: Yannick
abstract: "Die senseBox wird in diesem Projekt genutzt um Bodenfeuchte und Bodentemperatur zu messen. Die dafür benötigte Hardware ist der truebner SMT50 kapazitive Bodensensor. Die Werte sollen anschließend noch auf die openSenseMap übertragen werden."
image: logo_bunt.png
image0: /images/projects/bodenfeuchte/setup_reallife2.jpg
image1: /images/projects/bodenfeuchte/sensoren_reg.jpg
image2: /images/projects/bodenfeuchte/sensoren_umbenennen.jpg
image3: /images/projects/bodenfeuchte/blockly_sketch.jpg
image4: /images/projects/bodenfeuchte/station_sendung.jpg
image5: /images/projects/bodenfeuchte/station_aufbau.jpg
material:
    - senseBox MCU
    - kapazitiver Bodenfeuchtesensor (SMT50) 
    - WiFi-Bee
ide: blockly
lang: de
tags: ["Informatik"]
difficult: leicht
---
# Bodenfeuchtesensor SMT50 auf der openSenseMap

Hier zeigen wir dir, wie du die Werte des SMT50 mithilfe des WiFi-Bees auf die openSenseMap hochlädst und so auch aus dem Urlaub heraus immer den Überblick über deine Bodenfeuchte behalten kannst!

## Aufbau

Hier muss man nicht viel beachten. Solltest du den truebner SMT50 in unserem Shop gekauft haben, dann kommt dieser bereits mit einem JST-Stecker und man kann ihn einfach in einen der Digital-Ports einstecken. By default der Erste (auf älteren Boards noch mit a gekennzeichnet). Das WiFi-Bee kommt ebenfalls auf den ersten Bee-Steckplatz.<br>Hier im Bild nochmal der gesamte Aufbau:
{% include image.html image=page.image0 %}

## Neue senseBox auf der openSenseMap anlegen

Nun solltest du auf die Seite opensensemap.org wechseln und dort eine neue Box anlegen. Wie das Schritt für Schritt funktioniert, erklären wir in diesem [Video](https://www.youtube.com/watch?v=LtGrribDAho). Konfiguriere die senseBox nach deinen Wünschen, bis auf den Abschnitt Sensoren. Dort wählen wir diesmal nur den Temperatursensor aus, den wir substituieren, da der SMT50 nicht Teil der Standardkonfiguration der senseBox home ist.<br>Hier nochmal zur Veranschaulichung:<br>
{% include image.html image=page.image1 %}

Sobald die senseBox registriert ist, kann man diese auf dem Dashboard anzeigen lassen. Hier gibt es nun die Möglichkeit die Box zu bearbeiten. Aus den ursprünglich für den HDC gedachten Einträgen, werden diese beiden:<br>
{% include image.html image=page.image2 %}

Nun darf man nicht vergessen auf die Diskette oben rechts zu klicken um die Änderungen zu speichern. Notiere dir nun die Box ID zusammen mit den beiden Sensor IDs.

## Programmierung

Nun navigieren wir zu blockly.sensebox.de und erstellen das folgende Block-Puzzle:<br>
{% include image.html image=page.image3 %}

Im WiFI-Block musst du noch deinen Netzwerknamen und das WLAN-Passwort eintragen und im OSeM-Block die ID deiner senseBox. In den Blöcken der SMT Message musst du nun die zuvor notierten IDs eintragen. Achte darauf die IDs für Temperatur und Feuchtigkeit nicht zu vertauschen, was offensichtlich zu irritierenden Werten führen kann.

Das Skript wird nun via USB-Kabel auf die senseBox gespielt, es sind keine weiteren Änderungen nötig. Nun sollten sofort Werte auf die openSenseMap übertragen werden:<br>
{% include image.html image=page.image4 %}

## Test

{% include image.html image=page.image5 %}<br>
Der Sensor muss nicht vorher kalibriert werden, er kann direkt in die Erde. Bestenfalls in einer wagerechten Position, damit die Bodenfeuchte möglichst genau ausgelesen werden kann.
